
<!DOCTYPE html>
<meta charset="utf-8">
<head>
<style>

.path--background {
  fill: none;
  stroke: #000;
  stroke-width: 2px;
}

.path--foreground {
  fill: rgb(1, 0, 0, 0.41);
  color: rgb(1, 0, 0, 0.41);
  }

.label {
  font: 24px sans-serif;
  text-anchor: middle;
}

</style>
  </head>
<body>
<script src="//d3js.org/d3.v3.min.js"></script>
<script>

let template = document.querySelector( 'template.sentiment' );
let svg = template.content.querySelector( 'svg' );

let colors = ['#9575CD', '#5E35B1', '#311B92'];   
let radius = ( this.root.clientWidth * 0.80 ) / 2;     
let rotation = 0;    
let slices = [
  ( value.negative / value.total ) * 100,
  ( value.nuetral / value.total ) * 100,
  ( value.positive / value.total ) * 100
];

for( let s = 0; s < slices.length; s++ ) {
  let x = Math.cos( ( 2 * Math.PI ) / ( 100 / slices[s] ) );
  let y = Math.sin( ( 2 * Math.PI ) / ( 100 / slices[s] ) );
  let arc = ( slices[s] <= 50 ) ? 0 : 1;
  let d = `M${radius},${radius} L${radius},0, A${radius},${radius} 0 ${arc},1 ${radius + y * radius},${radius - x * radius} z`;
      
  let pie = document.createElementNS( List.SVG_NS, 'path' );
  pie.setAttributeNS( null, 'fill', colors[s] );
  pie.setAttributeNS( null, 'd', d );
  pie.setAttributeNS( null, 'transform', `rotate(${rotation} ${radius} ${radius})` );
  svg.appendChild( pie );
      
  rotation = rotation + ( ( slices[s] / 100 ) * 360 );
}

let clone = document.importNode( template.content, true );
this.root.appendChild( clone );

</script>
</body>
</html>
